{"version":3,"sources":["pages/tetris/RankingList.js","pages/tetris/RankingHisList.js","util/util.js","pages/tetris/RankingBox.js","component/Panel.js","pages/tetris/Setting.js","component/SearchBar.js","component/ComboBox.js","pages/tetris/FirstMenu.js","pages/tetris/MainBody.js","pages/tetris/TopMenu.js","pages/tetris/FootNotice.js","pages/tetris/Tetris.js","pages/welcome/Join.js","pages/welcome/Login.js","pages/welcome/Welcome.js","App.js","reportWebVitals.js","index.js"],"names":["RankingList","rank","onRowClick","timerId","useRef","topRef","useEffect","setInterval","current","parentNode","classList","toggle","clearInterval","className","onClick","e","nameDiv","currentTarget","querySelector","textContent","name","score","level","reg_dt","link","style","margin","src","ref","width","RankingHisList","item","textAlign","UT","uuid","len","now","Date","d","toLocaleString","split","t","toTimeString","trim","length","getSeconds","rand","n","isNaN","pos","Math","pow","Number","random","toFixed","request","callback","url","body","method","option","credentials","headers","document","content","toLowerCase","JSON","stringify","showLoadMask","fetch","then","res","status","json","result","errMsg","error","rows","data","catch","console","show","modalRoot","querySelectorAll","maskBack","createElement","mask","add","appendChild","i","dot","window","modalIntervalId","dots","color","num","remove","firstChild","removeChild","alert","msg","callback_yes","makeDialog","confirm","Callback_no","isConfirm","yes","no","back","dialog","msgBox","btnBox","yesBtn","onclick","target","noBtn","RankingBox","onBack","searchText","filterValue","useState","rankList","setRankList","rankHisList","setRankHisList","userName","setUserName","wrapperRef","getRankHistory","param","left","transform","slice","list","filter","indexOf","getRankList","display","position","height","map","idx","marginLeft","row","Panel","title","children","Setting","keys","setKeys","ref_theme_col","ref_keybox","ref_theme","ref_init_theme","context","useContext","SessionContext","selected","targ","id","sel","root","onChangeTheme","onKeyDown","contains","pre","key","getTheme","session","theme","keyset","arr","getKeyset","addEventListener","removeEventListener","marginBottom","join","SearchBar","onSearch","text","setText","onChange","value","keyCode","placeholder","ComboBox","onSelected","items","FirstMenu","onSelect","onRefresh","isClicked","setIsClicked","divRef","ref_title","hideRank","setHideRank","hideOpt","setHideOpt","userNm","setUserNm","comboVal","setComboVal","clickLevel","marginTop","hidden","r1","r2","r3","val","marginRight","isTouched","rotate","block","size","w","h","bit","temp1","temp2","forEach","b","push","sort","a","getClientRects","top","pop","minLeft","maxLeft","bodyInfo","getBlockRect","g_keyset","leftSide","rightSide","downSide","move","deg","floor","collision","getBlockRectAll","rect","bitObj","checkCollision","bitInfo","startX","startY","endX","endY","deadBlocks","currBits","deadBits","k","j","orginBit","halfPlus","half","abs","removeLayer","layer","ly","cls","blockDeg","MainBody","onGameOver","blockCount","setBlockCount","setScore","comboStack","setComboStack","ref_fall","ref_over","ref_acc","combo_timerId","combo_limit","combo_div","moveDownFunc","curr","currCombo","fullLayer","cnt","checkFullLayer","opacity","moveDown","bodyTop","bodyLeft","borderL","borderR","isUnderCelling","setTimeout","speed","b1","b2","b3","b4","b5","b6","b7","frame","transformOrigin","div","cssText","makeBlock","bodySize","TopMenu","themeColor","onLogout","FootNotice","topList","setTopList","whiteSpace","Tetris","hideMenu","setHideMenu","hideBody","setHideBody","currLevel","setCurrLevel","ref_cont","moveBtns","btns","rs","Join","onJoinEnd","setId","pw","setPw","pwConf","setPwConf","warnMsg","setWarnMsg","ref_box","ref_warn","inputs","visibility","dataset","gosignup","empty","field","focus","type","data-name","Login","onClickSignIn","onLogin","input","goLogin","fontSize","Welcome","onLoginSuccess","isJoin","setIsJoin","React","createContext","App","sessionStorage","getItem","login","setSession","setThemeColor","token","Provider","clear","styleSheets","rules","backgroundColor","setItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e0dd616f.chunk.js","sourcesContent":["import React, { useEffect, useRef } from 'react';\r\n\r\nfunction RankingList({rank, onRowClick}){\r\n    const timerId = useRef(0);\r\n    const topRef = useRef();\r\n\r\n    const onClick = (e)=>{\r\n        const nameDiv = e.currentTarget.querySelector('div.rank-name');\r\n        onRowClick(nameDiv.textContent);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        setInterval(()=>{\r\n            if(topRef.current){\r\n                topRef.current.parentNode.classList.toggle(\"rank-top\");\r\n            }\r\n        }, 1000);\r\n        return ()=>clearInterval(timerId.current);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"rank-row\" onClick={onClick}>\r\n            <div className=\"rank-rank\">{rank.rank}</div>\r\n            <div className=\"rank-name\">{rank.name}</div>\r\n            <div className=\"rank-score\">{`${rank.score} ( ${rank.level} )`}</div>\r\n            <div className=\"rank-date\">{rank.reg_dt}</div>\r\n            {rank.link ? <div style={{margin:\"0 auto\"}}></div> : null}\r\n            {rank.link ? <img src={rank.link} ref={topRef} style={{width:\"25px\"}}></img> : null}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RankingList;","import React from 'react';\r\n\r\nfunction RankingHisList({item}){\r\n\r\n    return (\r\n        <div className=\"rank-his-row\">\r\n            <div style={{width : \"150px\", textAlign : \"left\"}}>{`${item.score} ( ${item.level} )`}</div>\r\n            <div >{item.reg_dt}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RankingHisList;","export const UT = {\r\n    uuid : ()=>{\r\n        var len = 0;\r\n        const now = new Date();\r\n        const d = now.toLocaleString().split('.');\r\n        const t = now.toTimeString().split(':');\r\n\r\n        len = d[1].trim().length; \r\n        d[1] = len === 1 ? '0' + d[1].trim() : d[1].trim(); \r\n        len = d[2].trim().length; \r\n        d[2] = len === 1 ? '0' + d[2].trim() : d[2].trim();\r\n\r\n        return d[0] + d[1] + d[2] + '-' + t[0] + t[1] + now.getSeconds() + '-' + UT.rand(100);\r\n    },\r\n\r\n    rand : n => { // 0 ~ n 사이의 랜덤숫자 리턴\r\n        if(isNaN(n)) return 0;\r\n        else{\r\n            const pos = Math.pow(10, Number((\"\" + n).length));\r\n            return (Math.random() * pos % n).toFixed();\r\n        }\r\n    },\r\n\r\n    request : ({url, body = {}, method='POST'}, callback)=>{\r\n        if(!url) return;\r\n        \r\n        const option = {\r\n            method: method,\r\n            credentials: \"same-origin\",\r\n            headers: {\r\n                \"Content-Type\" : \"application/json\",\r\n                \"X-CSRF-TOKEN\" : document.querySelector('meta[name=_csrf]').content\r\n            }\r\n        }\r\n        if(method.toLowerCase() === 'post') option.body = JSON.stringify(body);\r\n        \r\n        UT.showLoadMask(true);\r\n        fetch(\"/api/\" + url, option)\r\n        .then(res => {\r\n            UT.showLoadMask(false);\r\n            return res.status === 200 ? res.json() : {}\r\n        })\r\n        .then(res => {\r\n            const result = {\r\n                errMsg : res.error,\r\n                result : res.rows,\r\n                data : res.data || res\r\n            }\r\n            if(callback && typeof callback === \"function\") callback(result);\r\n        })\r\n        .catch(e => {\r\n            console.error(e);\r\n        });\r\n    },\r\n\r\n    showLoadMask : (show)=>{\r\n        const modalRoot = document.querySelector('#modal');\r\n        if(show){\r\n            if(document.querySelectorAll('div.modal-back').length !== 0) return;\r\n            const maskBack = document.createElement('div');\r\n            const mask = document.createElement('div');\r\n            maskBack.classList.add('modal-back');\r\n            mask.classList.add('mask');\r\n\r\n            modalRoot.appendChild(maskBack);\r\n            maskBack.appendChild(mask);\r\n\r\n            for(var i=1; i<=8; i++){\r\n                const dot = document.createElement('div');\r\n                dot.classList.add('dot' + i);\r\n                dot.classList.add('dotcol-' + i);\r\n                mask.appendChild(dot);\r\n            }\r\n\r\n            window.modalIntervalId = setInterval(()=>{\r\n                const dots = document.querySelectorAll('div.modal-back div[class*=\"dot\"]');\r\n                for(var i=0; i<dots.length; i++){\r\n                    const color = dots[i].classList.item(1);\r\n                    var num = Number(color.split('-')[1]);\r\n                    num = num + 1 > 8 ? 1 : num + 1;\r\n                    \r\n                    dots[i].classList.remove(color);\r\n                    dots[i].classList.add(\"dotcol-\" + num);\r\n                }\r\n            }, 80);\r\n\r\n        }else{\r\n            if(modalRoot.firstChild){\r\n                clearInterval(window.modalIntervalId);\r\n                modalRoot.removeChild(modalRoot.firstChild);\r\n            }\r\n        }\r\n    },\r\n\r\n    alert : (msg, callback_yes)=>{\r\n        UT.makeDialog(false, msg, [callback_yes]);\r\n    },\r\n\r\n    confirm : (msg, callback_yes, Callback_no)=>{\r\n        UT.makeDialog(true, msg, [callback_yes, Callback_no]);\r\n    },\r\n\r\n    makeDialog : (isConfirm, msg, [yes, no])=>{\r\n        const modalRoot = document.querySelector('#modal');\r\n        if(document.querySelectorAll('div.modal-back').length !== 0) return;\r\n        const back = document.createElement('div');\r\n        const dialog = document.createElement('div'); // alert창\r\n        const msgBox = document.createElement('div'); // 메시지박스\r\n        const btnBox = document.createElement('div'); // 버튼박스\r\n        const yesBtn = document.createElement('div'); // 확인버튼\r\n        \r\n        back.classList.add('modal-back');\r\n        dialog.classList.add('dialog');\r\n        msgBox.classList.add('dialog-msg-box');\r\n        btnBox.classList.add('dialog-btn-box');\r\n        yesBtn.classList.add('dialog-btn-1');\r\n        \r\n        msgBox.textContent = msg;\r\n        yesBtn.textContent = \"Yes\";\r\n        yesBtn.onclick = (e)=>{\r\n            e.target.onclick = null;\r\n            modalRoot.removeChild(modalRoot.firstChild);\r\n            if(yes && typeof yes === \"function\") yes();\r\n        }\r\n        \r\n        modalRoot.appendChild(back);\r\n        back.appendChild(dialog);\r\n        dialog.appendChild(msgBox);\r\n        dialog.appendChild(btnBox);\r\n        btnBox.appendChild(yesBtn);\r\n\r\n        if(isConfirm){\r\n            const noBtn = document.createElement('div');\r\n            noBtn.classList.add('dialog-btn-1');\r\n            noBtn.textContent = \"No\";\r\n            noBtn.onclick = (e)=>{\r\n                e.target.onclick = null;\r\n                modalRoot.removeChild(modalRoot.firstChild);\r\n                if(no && typeof no === \"function\") no();\r\n            }\r\n            btnBox.appendChild(noBtn);\r\n        }\r\n    }\r\n}","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport RankingList from './RankingList';\r\nimport RankingHisList from './RankingHisList';\r\nimport {UT} from '../../util/util';\r\n\r\nfunction RankingBox({onBack, searchText, filterValue}){\r\n    const [rankList, setRankList] = useState([]);\r\n    const [rankHisList, setRankHisList] = useState([]);\r\n    const [userName, setUserName] = useState(\"\");\r\n    const wrapperRef = useRef();\r\n\r\n    const getRankList = ()=>{\r\n        const param = {\r\n            url : \"getRankList\",\r\n            body : {\r\n                name : searchText.name,\r\n                level : filterValue\r\n            }\r\n        };\r\n        UT.request(param, (res)=>{\r\n            var list = res.result;\r\n            if(filterValue){\r\n                list = list.filter(d => d.level === filterValue);\r\n            }\r\n            if(searchText.name){\r\n                list = list.filter(d => d.name.toLowerCase().indexOf(searchText.name.toLowerCase()) > -1);\r\n            }\r\n            setRankList(list);\r\n        });\r\n    }\r\n    const getRankHistory = (name)=>{\r\n        const param = {\r\n            url : \"getHistory\",\r\n            body : {name}\r\n        };\r\n        UT.request(param, (res)=>{\r\n            wrapperRef.current.style.left = \"0\";\r\n            wrapperRef.current.style.transform = \"translateX(0)\";\r\n            setRankHisList(res.result.slice());\r\n            setUserName(name);\r\n        });\r\n    }\r\n    const clickCancel = ()=>{\r\n        wrapperRef.current.style.left = \"50%\";\r\n        wrapperRef.current.style.transform = \"translateX(-50%)\";\r\n        setRankHisList([]);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getRankList();\r\n    }, [searchText, filterValue]);\r\n    \r\n    return (\r\n        <>\r\n            <div style={{display : \"flex\"}}>\r\n                <div style={{display : \"flex\", position : \"relative\", left : \"50%\", transform : \"translateX(-50%)\"}}>\r\n                    <div className=\"rank-wrapper\" ref={wrapperRef}>\r\n                        <div className=\"rank-header\">\r\n                            <div>Rank</div>\r\n                            <div className=\"rank-name\">Name</div>\r\n                            <div className=\"rank-score\">Score</div>\r\n                            <div className=\"rank-date\">Date</div>\r\n                            <div style={{margin:\"0 auto\"}}></div>\r\n                            <div>Title</div>\r\n                        </div>\r\n                        <div className=\"rank-box\">\r\n                            <div style={{height : \"45vh\"}}>\r\n                                {rankList.map((rank, idx) => {\r\n                                    if(rank.rank === 1) rank.link = '/rank1.png';\r\n                                    return <RankingList rank={rank} key={rank.name} onRowClick={getRankHistory}></RankingList>;\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {rankHisList.length > 0 ? \r\n                    <div style={{marginLeft : \"20px\"}}>\r\n                        <div className=\"rank-his-header\">\r\n                            <div style={{margin : \"0 auto\"}}>{`${userName}`}</div>\r\n                            <div className=\"btn-x\" onClick={clickCancel}>X</div>\r\n                        </div>\r\n                        <div className=\"rank-his-box\">\r\n                                {rankHisList.map((row, idx)=>{\r\n                                    return <RankingHisList item={row} key={idx}></RankingHisList>\r\n                                })}\r\n                        </div>\r\n                    </div>\r\n                    : null}\r\n                </div>\r\n            </div>\r\n            <div className=\"label1\" onClick={() => onBack()}>Back</div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default RankingBox;","import React from 'react';\r\n\r\nfunction Panel({style = {}, title = \"\", children}){\r\n    return (\r\n        <div style={style}>\r\n            <div className=\"panel-box\">\r\n                <div className=\"panel-title\">{title}</div>\r\n                <div className=\"panel-content\">\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Panel;","import React, { useEffect, useState, useContext, useRef } from 'react';\r\nimport Panel from '../../component/Panel';\r\nimport { UT } from '../../util/util';\r\nimport {SessionContext} from '../../App';\r\n\r\nfunction Setting({onBack}){\r\n    const [keys, setKeys] = useState([]);\r\n    const ref_theme_col = useRef(\"\");\r\n    const ref_keybox = useRef();\r\n    const ref_theme = useRef();\r\n    const ref_init_theme = useRef(\"\");\r\n    const context = useContext(SessionContext);\r\n    const selected = \"key-btn-sel\";\r\n\r\n    const onClick = (e)=>{\r\n        const targ = e.currentTarget;\r\n        const idx = targ.id.indexOf(\"theme\");\r\n        const node = idx === -1 ? ref_keybox.current : ref_theme.current;\r\n        const sel = node.querySelector(`.${selected}`);\r\n        \r\n        if(sel){\r\n            if(idx === -1){\r\n                sel.classList.toggle(selected);\r\n                if(sel.id !== targ.id) targ.classList.toggle(selected);\r\n            }else{\r\n                if(sel.id !== targ.id) {\r\n                    targ.classList.add(selected);\r\n                    sel.classList.remove(selected)\r\n                }\r\n            }\r\n        }else{\r\n            targ.classList.toggle(selected);\r\n        }\r\n\r\n        if(idx > -1){\r\n            const root = document.querySelector('#root');\r\n            if(targ.id === \"theme2\"){\r\n                root.classList.add(\"dark\");\r\n                ref_theme_col.current = \"dark\";\r\n            }else{\r\n                root.classList.remove(\"dark\");\r\n                ref_theme_col.current = \"\";\r\n            }\r\n            context.onChangeTheme(ref_theme_col.current);\r\n        }\r\n    }\r\n    const onKeyDown = (e)=>{\r\n        const targ = ref_keybox.current.querySelector(`.${selected}`);\r\n        if(targ && targ.classList.contains(selected)){\r\n            const idx = Number(targ.id.split('key')[1]);\r\n            setKeys(pre => {\r\n                pre[idx] = e.key;\r\n                return pre.slice();\r\n            });\r\n        }\r\n    }\r\n    const getKeyset = ()=>{\r\n        const param = {\r\n            url : \"getKeySet\",\r\n            body : {name : context.session.id}\r\n        };\r\n        UT.request(param, (res)=>{\r\n            var keyset = res.result[0] && res.result[0].keyset;\r\n            const arr = keyset ? keyset.split('/') : ['w','s','a','d','j'];\r\n            setKeys(arr);\r\n        });\r\n    }\r\n    const saveKeyset = ()=>{\r\n        UT.confirm(\"Do you want to save?\", ()=>{\r\n            const param = {\r\n                url : \"saveKeySet\",\r\n                body : {\r\n                    name : context.session.id,\r\n                    keyset : keys.join('/')\r\n                }\r\n            } \r\n            UT.request(param, (res)=>{\r\n                UT.alert(res.errMsg || \"Save complete!\");\r\n            });\r\n        });\r\n    }\r\n    const getTheme = ()=>{\r\n        const param = {\r\n            url : \"getTheme\",\r\n            body : {name : context.session.id}\r\n        };\r\n        UT.request(param, (res)=>{\r\n            const targ = res.result[0] && res.result[0].theme === \"dark\" ? \"theme2\" : \"theme1\";\r\n            ref_theme.current.querySelector(`#${targ}`).classList.add(selected);\r\n            ref_theme_col.current = res.result[0] ? res.result[0].theme : \"light\";\r\n            ref_init_theme.current = res.result[0] ? res.result[0].theme : \"light\";\r\n        });\r\n    }\r\n    const saveTheme = ()=>{\r\n        UT.confirm(\"Do you want to save?\", ()=>{\r\n            const param = {\r\n                url : \"saveTheme\",\r\n                body : {\r\n                    name : context.session.id,\r\n                    theme : ref_theme_col.current\r\n                }\r\n            } \r\n            UT.request(param, (res)=>{\r\n                UT.alert(res.errMsg || \"Save complete!\", ()=>{\r\n                    getTheme();\r\n                });\r\n            });\r\n        });\r\n    }\r\n    const restoreKeyset = ()=>{\r\n        setKeys(['w','s','a','d','j']);\r\n    }\r\n    const onBackClick = ()=>{\r\n        context.onChangeTheme(ref_init_theme.current);\r\n        onBack();\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getKeyset();\r\n        getTheme();\r\n        document.addEventListener(\"keydown\", onKeyDown);\r\n        return ()=> document.removeEventListener(\"keydown\", onKeyDown);\r\n    }, []);\r\n\r\n    return (\r\n        <>  \r\n            <div className=\"setting-box\">\r\n                <Panel title=\"Key Setting\" style={{height : \"280px\", marginBottom : \"20px\"}}>\r\n                    <div className=\"keyset-box\" ref={ref_keybox}>\r\n                        <div>Rotate\r\n                            <div className=\"key-btn\" id=\"key0\" onClick={onClick}>{keys[0]}</div>\r\n                        </div>\r\n                        <div>Move down\r\n                            <div className=\"key-btn\" id=\"key1\" onClick={onClick}>{keys[1]}</div>\r\n                        </div>\r\n                        <div>Move left\r\n                            <div className=\"key-btn\" id=\"key2\" onClick={onClick}>{keys[2]}</div>\r\n                        </div>\r\n                        <div>Move right\r\n                            <div className=\"key-btn\" id=\"key3\" onClick={onClick}>{keys[3]}</div>\r\n                        </div>\r\n                        <div>Drop\r\n                            <div className=\"key-btn\" id=\"key4\" onClick={onClick}>{keys[4]}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"setting-btn\">\r\n                        <div className=\"basic-btn-3\" onClick={saveKeyset}>Save</div>\r\n                        <div className=\"basic-btn-3\" onClick={restoreKeyset}>Restore Default</div>\r\n                    </div>\r\n                </Panel>\r\n                <Panel title=\"Theme Color\" style={{height : \"150px\"}}>\r\n                    <div className=\"x-center\" ref={ref_theme} style={{display : \"flex\", width : \"fit-content\"}}>\r\n                        <div className=\"basic-btn-3\" id=\"theme1\" onClick={onClick}>Light</div>\r\n                        <div className=\"basic-btn-3\" id=\"theme2\" onClick={onClick}>Dark</div>\r\n                    </div>\r\n                    <div className=\"setting-btn\">\r\n                        <div className=\"basic-btn-3\" onClick={saveTheme}>Save</div>\r\n                    </div>\r\n                </Panel>\r\n            </div>\r\n            <div className=\"label1\" onClick={onBackClick}>Back</div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Setting;","import React, { useState } from 'react';\r\n\r\nfunction SearchBar({onSearch, style = {}}){\r\n    const [text, setText] = useState(\"\");\r\n\r\n    const onChange = (e)=>{\r\n        setText(e.target.value);\r\n    }\r\n    const onKeyDown = (e)=>{\r\n        if(e.keyCode === 13) onSearch(text);\r\n    }\r\n    const onClick = ()=>{\r\n        onSearch(text);\r\n    }\r\n\r\n    return (\r\n        <div style={style}>\r\n            <div className=\"search-bar\">\r\n                <input className=\"input-search\" onChange={onChange} onKeyDown={onKeyDown} value={text} placeholder=\"Search by user name\"></input>\r\n                <div className=\"search-btn\" onClick={onClick}>➤</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchBar;","import React from 'react';\r\n\r\nfunction ComboBox({onSelected, items = [], style={}}){\r\n\r\n    return (\r\n        <div style={style}>\r\n            <select className=\"combobox\"  onChange={(e)=>{onSelected(e.currentTarget.value)}}>\r\n                <option value=\"\">none</option>\r\n                {items.map((d, idx)=>{\r\n                    return <option value={d} key={idx}>{d}</option>\r\n                })}\r\n            </select>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ComboBox;","import React, { useEffect, useRef, useState} from 'react';\r\nimport RankingBox from './RankingBox';\r\nimport Setting from './Setting';\r\nimport SearchBar from '../../component/SearchBar';\r\nimport ComboBox from '../../component/ComboBox';\r\nimport './Tetris.css';\r\n\r\n\r\nfunction FirstMenu({onSelect, level = [], onRefresh}){\r\n    const [isClicked, setIsClicked] = useState(false);\r\n    const timerId = useRef(\"0\");\r\n    const divRef = useRef();\r\n    const ref_title = useRef();\r\n    const [hideRank, setHideRank] = useState(true);\r\n    const [hideOpt, setHideOpt] = useState(true);\r\n    const [userNm, setUserNm] = useState(\"\");\r\n    const [comboVal, setComboVal] = useState(\"\");\r\n\r\n    const clickStart = (e)=>{\r\n        setIsClicked(true);\r\n        timerId.current = setInterval(()=>{\r\n            if(!divRef.current) return;\r\n            const r1 = Math.random() * 1000 % 256;\r\n            const r2 = Math.random() * 1000 % 256;\r\n            const r3 = Math.random() * 1000 % 256;\r\n            divRef.current.style.color = `rgb(${r1}, ${r2}, ${r3})`;\r\n        },500);\r\n    };\r\n\r\n    const clickLevel = (e)=>{\r\n        if(e.target.textContent === \"Back\") onRefresh();\r\n        else onSelect(e.target);\r\n    }\r\n    const clickRanking = ()=>{\r\n        setHideRank(false);\r\n        ref_title.current.classList.toggle(\"title-min\");\r\n    }\r\n    const clickOption = ()=>{\r\n        setHideOpt(false);\r\n        ref_title.current.classList.toggle(\"title-min\");\r\n    }\r\n    const onBack = ()=>{\r\n        setHideRank(true);\r\n        setHideOpt(true);\r\n        setComboVal(\"\");\r\n        setUserNm(\"\");\r\n        ref_title.current.classList.toggle(\"title-min\");\r\n    }\r\n    const onSearch = (userNm)=>{\r\n        setUserNm({name : userNm});\r\n    }\r\n    const onSelected = (sel)=>{\r\n        setComboVal(sel);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        return ()=>{clearInterval(timerId.current)};\r\n    },[]);\r\n\r\n    const st = {\r\n        display : \"flex\",\r\n        position : \"relative\",\r\n        left : \"50%\",\r\n        transform : \"translateX(-50%)\",\r\n        width : \"fit-content\"\r\n    };\r\n    return(\r\n        <>\r\n            <div className=\"menu-box\">\r\n                <div className=\"title\" ref={ref_title}>TETRIS</div>\r\n                {!hideRank || !hideOpt? null :\r\n                 <div>\r\n                    <div style={{marginTop : \"15vh\"}}>\r\n                        <div className=\"label2\" hidden={!isClicked} ref={divRef}>Select level</div>\r\n                        <div className=\"label1\" onClick={clickStart} hidden={isClicked}>Start</div>\r\n                        <div className=\"label1\" onClick={clickRanking} hidden={isClicked}>Ranking</div>\r\n                        <div className=\"label1\" onClick={clickOption} hidden={isClicked}>Setting</div>\r\n                    </div>\r\n                    {isClicked ? <div className=\"level-box\">\r\n                        {level.map((val, idx)=>{\r\n                            return <div className=\"label3\" key={idx} onClick={clickLevel}>{val}</div>\r\n                        })}\r\n                        <div className=\"label3\" onClick={clickLevel}>Back</div>\r\n                    </div> : null}\r\n                </div>}\r\n                \r\n                {hideRank ? null : \r\n                    <>\r\n                        <div style={st}>\r\n                            <SearchBar onSearch={onSearch} style={{marginRight : \"5px\"}}></SearchBar>\r\n                            <ComboBox items={level} onSelected={onSelected}></ComboBox>\r\n                        </div>\r\n                        <RankingBox onBack={onBack} searchText={userNm} filterValue={comboVal}></RankingBox>\r\n                    </>\r\n                }\r\n\r\n                {hideOpt ? null : <Setting onBack={onBack}></Setting>}\r\n\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default FirstMenu;","import React, { useEffect, useRef, useState } from 'react'\r\n\r\n// 블록 생성\r\nfunction makeBlock(body, idx, size, ref_fall, moveDownFunc, blockCount, speed){\r\n    const block = {\r\n        b1 : [[1,0], [1,0], [1,0], [1,0]], // ㅡ\r\n        b2 : [[1,0], [1,0], [1,1]], // ㄱ\r\n        b3 : [[1,1], [1,0], [1,0]], // 반대 ㄱ\r\n        b4 : [[1,0], [1,1], [0,1]], // ㄹ\r\n        b5 : [[0,1], [1,1], [1,0]], // 반대 ㄹ\r\n        b6 : [[1,1], [1,1]], // ㅁ\r\n        b7 : [[0,1], [1,1], [0,1]] // ㅗ\r\n    };\r\n\r\n    const len = block[\"b\" + idx].length;\r\n    \r\n    const frame = document.createElement('div');\r\n    frame.style.width = (len * size) + \"px\";\r\n    frame.style.height = (2 * size) + \"px\";\r\n    frame.style.position = \"relative\";\r\n    frame.style.left = (3 * size) + \"px\";\r\n    frame.style.transformOrigin = idx === 6 ? `${size}px ${size}px` : `${size + size/2}px ${size/2}px`;\r\n    frame.classList.add(\"active\");\r\n\r\n    for(var i=0; i<2; i++){\r\n        const row = document.createElement('div');\r\n        row.style.width = (len * size) + \"px\";\r\n        row.style.height = size + \"px\";\r\n        row.style.display = \"flex\";\r\n        frame.appendChild(row);\r\n    }\r\n\r\n    for(var i=0; i<block[\"b\" + idx].length; i++){\r\n        for(var k=0; k<2; k++){\r\n            const val = block[\"b\" + idx][i][k];\r\n            const div = document.createElement('div');\r\n\r\n            div.style.cssText = `width:${size}px; height:${size}px;`;\r\n            if(val === 1) div.classList.add(\"block-color\" + idx);\r\n\r\n            if(k === 0){\r\n                frame.children[0].appendChild(div);\r\n            }else{\r\n                frame.children[1].appendChild(div);\r\n            }\r\n        }\r\n    }\r\n    body.current.appendChild(frame);\r\n\r\n    // 하나 쌓일때마다 size x 2 씩 아래로 밀려서 블록이 생성된다... 원인을 모르겠어서 임시처방\r\n    if(blockCount > 0){\r\n        frame.style.top = `-${size * 2 * blockCount}px`\r\n    }\r\n\r\n    // 난이도별 타이머 간격\r\n    ref_fall.current = setInterval(moveDownFunc, speed);\r\n}\r\n\r\nfunction isUnderCelling(body, size){\r\n    if(body.getClientRects().length == 0) return false;\r\n    const {top : bodyTop, left : bodyLeft} = body.getClientRects()[0];\r\n    const deadBlocks = document.querySelectorAll('div.non-active');\r\n    const half = size / 2;\r\n\r\n    const borderL = bodyLeft + size * 2; \r\n    const borderR = bodyLeft + size * 8;\r\n\r\n    for(var i=0; i<deadBlocks.length; i++){\r\n        const {rect : deadBits} = getBlockRectAll(deadBlocks[i]);\r\n        for(var k=0; k<deadBits.length; k++){\r\n            if(deadBits[k].top + half > bodyTop && deadBits[k].top + half < bodyTop + size &&\r\n                deadBits[k].left + half > borderL && deadBits[k].left + half < borderR){\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// 현재 블록의 가장 밖같쪽 top, left 반환\r\nfunction getBlockRect(block){\r\n    if(!block) return;\r\n    const bit = block.querySelectorAll('[class*=\"block-color\"]');\r\n    const temp1 = [], temp2 = [];\r\n    \r\n    bit.forEach((b)=>{ \r\n        temp1.push(b);\r\n        temp2.push(b); \r\n    });\r\n    temp1.sort((a, b) => a.getClientRects()[0].top - b.getClientRects()[0].top);\r\n    temp2.sort((a, b) => a.getClientRects()[0].left - b.getClientRects()[0].left);\r\n\r\n    const top = temp1.pop().getClientRects()[0].top || 0;\r\n    const minLeft = temp2[0].getClientRects()[0].left || 0;\r\n    const maxLeft = temp2.pop().getClientRects()[0].left || 0;\r\n    const bodyInfo = document.querySelector('#body').getClientRects()[0] || 0;\r\n    \r\n    return {top, minLeft, maxLeft, bodyInfo};\r\n}\r\n\r\n// 벽에 닿았는지 체크\r\nfunction isTouched(rotate, block, size, key){\r\n    const w = 10 * size;\r\n    const h = 20 * size;\r\n    const {top, minLeft, maxLeft, bodyInfo} = getBlockRect(block);\r\n\r\n    if(rotate){ // 회전시 삐져나온부분 체크\r\n        const bw = 7; // body 의 border width\r\n        const leftSide = bodyInfo.left + bw - minLeft;\r\n        const rightSide = maxLeft + size - (bodyInfo.left + bw + w);\r\n        const downSide = top - (bodyInfo.top + bw + h);\r\n\r\n        // 튀어나온만큼 안쪽으로 밀어넣을건데 그랬을때 또 다른 블록들과 겹치는지 확인하고 겹치면 회전을 원복한다\r\n        var move = 0;\r\n        const deg = Number(block.style.transform.split('(')[1].split('deg')[0]);\r\n        if(leftSide > 0){\r\n            move = Math.floor(leftSide / size) === 0 ? size : Math.floor(leftSide / size) * size;\r\n            for(var i=1; i<=move/size; i++){\r\n                if(collision(false, block, size * (move/size), g_keyset[3])){\r\n                    block.style.transform = `rotate(${deg - 90}deg)`;\r\n                    return;\r\n                }\r\n            }\r\n            block.style.left = (Number(block.style.left.split('px')[0]) + move) + \"px\";\r\n        }\r\n        if(rightSide > 0){\r\n            move = Math.floor(rightSide / size) === 0 ? size : Math.floor(rightSide / size) * size;\r\n            for(var i=1; i<=move/size; i++){\r\n                if(collision(false, block, size * (move/size), g_keyset[2])){\r\n                    block.style.transform = `rotate(${deg - 90}deg)`;\r\n                    return;\r\n                }\r\n            }\r\n            block.style.left = (Number(block.style.left.split('px')[0]) - move) + \"px\";\r\n        }\r\n        if(downSide > 0){\r\n            move = Math.floor(downSide / size) === 0 ? size : Math.floor(downSide / size) * size;\r\n            for(var i=1; i<=move/size; i++){\r\n                if(collision(false, block, size * (move/size), g_keyset[1])){\r\n                    block.style.transform = `rotate(${deg - 90}deg)`;\r\n                    return;\r\n                }\r\n            }\r\n            block.style.top = (Number(block.style.top.split('px')[0]) - move) + \"px\";\r\n        }\r\n    }else{ // 이동시 벽너머로 삐져나갈 것인지 체크\r\n        switch(key){\r\n            case g_keyset[1]: \r\n                if(top - bodyInfo.top + size > h) return true;\r\n                else break;\r\n            case g_keyset[2]: \r\n                if(minLeft - bodyInfo.left - size < 0) return true;\r\n                else break;\r\n            case g_keyset[3]: \r\n                if(maxLeft - bodyInfo.left + size > w) return true;\r\n                else break;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n// 블록 모든 부분의 좌표정보 반환\r\nfunction getBlockRectAll(block){\r\n    const bit = block.querySelectorAll('[class*=\"block-color\"]');\r\n    const rect = [], bitObj = [];\r\n\r\n    for(var i=0; i<bit.length; i++){\r\n        rect.push(bit[i].getClientRects()[0]);\r\n        bitObj.push(bit[i]);\r\n    }\r\n    return {rect, bitObj};\r\n}\r\n\r\nfunction checkCollision(bitInfo, bodyInfo, startX, startY, endX, endY, size){\r\n    if(bitInfo.left > startX && bitInfo.left < endX && \r\n        bitInfo.top > startY && bitInfo.top < endY &&\r\n        bitInfo.left > bodyInfo.left && bitInfo.left < bodyInfo.left + size * 10 &&\r\n        bitInfo.top > bodyInfo.top && bitInfo.top < bodyInfo.top + size * 20){\r\n            return true;\r\n        }\r\n}\r\n\r\n// 다른 블록들과 충돌 체크\r\nfunction collision(rotate, block, size, key){\r\n    const bodyInfo = document.querySelector('#body').getClientRects()[0];\r\n    const deadBlocks = document.querySelectorAll('div.non-active');\r\n    const {rect : currBits, bitObj : cb} = getBlockRectAll(block);\r\n    var result = false; //rotate ? 0 : false;\r\n\r\n    for(var i=0; i<deadBlocks.length; i++){\r\n        const {rect : deadBits, bitObj : db} = getBlockRectAll(deadBlocks[i]);\r\n\r\n        for(var k=0; k<currBits.length; k++){\r\n            for(var j=0; j<deadBits.length; j++){\r\n                if(rotate){\r\n                    const blockX = Number(block.style.left.split('px')[0]);\r\n                    const blockY = Number(block.style.top.split('px')[0]);\r\n                    const orginBit = {\r\n                        left : currBits[k].left + size / 2,\r\n                        top : currBits[k].top + size / 2\r\n                    };\r\n                    const bitInfo = {...orginBit};\r\n                    var startX = deadBits[j].left - 0;\r\n                    var startY = deadBits[j].top - 0;\r\n                    var endX = startX + size + 0;\r\n                    var endY = startY + size + 0;\r\n                    \r\n                    result = checkCollision(bitInfo, bodyInfo, startX, startY, endX, endY, size);\r\n                    if(result) return true;\r\n                }else{\r\n                    const halfPlus = size + size / 2;\r\n                    const half = size / 2;\r\n                    switch(key){\r\n                        case g_keyset[1]:\r\n                            if(Math.abs(currBits[k].left - deadBits[j].left) <= 2 && \r\n                                currBits[k].top + halfPlus > deadBits[j].top && currBits[k].top + halfPlus < deadBits[j].top + size) {\r\n                                    return true;\r\n                                }\r\n                            else break;\r\n                        case g_keyset[2]:\r\n                            if(Math.abs(currBits[k].top - deadBits[j].top) <= 2 && \r\n                                currBits[k].left - half > deadBits[j].left && currBits[k].left - half < deadBits[j].left + size) {\r\n                                    return true;\r\n                                }\r\n                            else break;\r\n                        case g_keyset[3]:\r\n                            if(Math.abs(currBits[k].top - deadBits[j].top) <= 2 && \r\n                                currBits[k].left + halfPlus > deadBits[j].left && currBits[k].left + halfPlus < deadBits[j].left + size) return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction checkFullLayer(body, size){\r\n    const deadBlocks = document.querySelectorAll('div.non-active');\r\n    const half = size / 2;\r\n    const fullLayer = [];\r\n    \r\n    for(var h=1; h<=20; h ++){ // 위에서부터 아래로 내려가면서 가로로 10개 다 찼는지 확인\r\n        var cnt = 0; // 차있는 블록 갯수\r\n        const layer = body.getClientRects()[0].top + size * h; \r\n        for(var i=0; i<deadBlocks.length; i++){\r\n            const {rect : deadBits} = getBlockRectAll(deadBlocks[i]);\r\n            \r\n            for(var k=0; k<deadBits.length; k++){\r\n                if(deadBits[k].top + half > layer && deadBits[k].top + half < layer + size){\r\n                   cnt++ \r\n                }\r\n            }\r\n        }\r\n        if(cnt === 10) fullLayer.push(h);\r\n    }\r\n    return fullLayer;\r\n}\r\n\r\nfunction removeLayer(layer, body, size){\r\n    const deadBlocks = document.querySelectorAll('div.non-active');\r\n    const half = size / 2;\r\n    const ly = body.getClientRects()[0].top + size * layer;  \r\n\r\n    for(var i=0; i<deadBlocks.length; i++){\r\n        const {rect : deadBits, bitObj} = getBlockRectAll(deadBlocks[i]);\r\n        \r\n        for(var k=0; k<deadBits.length; k++){\r\n            // 가득찬 층 제거\r\n            if(deadBits[k].top + half > ly && deadBits[k].top + half < ly + size){\r\n                bitObj[k].classList.forEach( cls => bitObj[k].classList.remove(cls));\r\n                bitObj[k].classList.add(\"removed\");\r\n            }\r\n\r\n            // 제거된줄 윗부분 bit들 아래로 한칸씩내림\r\n            if(deadBits[k].top + half < ly){\r\n                const blockDeg = bitObj[k].parentNode.parentNode.style.transform;\r\n                const deg = blockDeg.split('(').length > 1 ? Number(blockDeg.split('(')[1].split('deg')[0]) : 0\r\n                const top = bitObj[k].style.top.split('px').length > 1 ? Number(bitObj[k].style.top.split('px')[0]) : 0;\r\n                const left = bitObj[k].style.left.split('px').length > 1 ? Number(bitObj[k].style.left.split('px')[0]) : 0;\r\n\r\n                bitObj[k].style.position = \"relative\";\r\n                const kind = (deg / 90) % 4;\r\n                switch(kind){\r\n                    case 0:\r\n                        bitObj[k].style.top = top + size + \"px\";\r\n                        break;\r\n                    case 1:\r\n                        bitObj[k].style.left = left + size + \"px\";\r\n                        break;\r\n                    case 2:\r\n                        bitObj[k].style.top = top - size + \"px\";\r\n                        break;\r\n                    case 3:\r\n                        bitObj[k].style.left = left - size + \"px\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// g_keyset : 키셋 전역변수, 0 ~ 4 --> 회전, 아래이동, 왼쪽이동, 오른쪽이동, 떨어뜨리기\r\nvar g_keyset = [];\r\n\r\nfunction MainBody({size = 10, level = \"Easy\", onGameOver, keyset = [g_keyset[0],g_keyset[1],g_keyset[2],g_keyset[3],g_keyset[4]]}){\r\n    const body = useRef();\r\n    const idx = Math.floor(Math.random() * 10 % 7 + 1);\r\n    const [blockCount, setBlockCount] = useState(0);\r\n    const [score, setScore] = useState(0);\r\n    const [comboStack, setComboStack] = useState(0);\r\n\r\n    const ref_fall = useRef('');\r\n    const ref_over = useRef();\r\n    const ref_acc = useRef(0);\r\n\r\n    const combo_timerId = useRef('');  // timer id\r\n    const combo_limit = useRef(3); // 제한시간\r\n    const combo_div = useRef(); // div element\r\n\r\n    g_keyset = keyset.slice();\r\n\r\n    const moveDownFunc = ()=>{\r\n        const curr = document.querySelector('div.active');\r\n        if(!curr) return;\r\n        if(isTouched(false, curr, size, g_keyset[1]) || collision(false, curr, size, g_keyset[1])){ // 아랫쪽 박스 경계선 닿거나, 다른블록과 닿으면 비활성 처리\r\n            clearInterval(ref_fall.current);\r\n            ref_fall.current = '';\r\n            curr.classList.remove('active');\r\n            curr.classList.add('non-active');\r\n            var currCombo = 1;\r\n\r\n            const fullLayer = checkFullLayer(body.current, size);\r\n            for(var i=0; i<fullLayer.length; i++){ // 꽉찬줄 제거\r\n                removeLayer(fullLayer[i], body.current, size);\r\n            }\r\n            \r\n            // 3초 이내에 또 없애면 콤보증가 (콤보스택만큼 점수에 곱하기)\r\n            if(fullLayer.length > 0){\r\n                if(combo_limit.current > 0) {\r\n                    clearInterval(combo_timerId.current);\r\n                    combo_limit.current = 3;\r\n                }\r\n                combo_timerId.current = setInterval(()=>{\r\n                    if(!combo_div.current) return;\r\n                    if(combo_limit.current == 3) combo_div.current.style.opacity = 0.9;\r\n                    combo_limit.current--;    \r\n                    \r\n                    // if(combo_limit.current == 1) combo_div.current.style.opacity = 0;\r\n                    if(combo_limit.current == 0){ // 제한시간 초과시 콤보값 초기화\r\n                        combo_div.current.style.opacity = 0;\r\n                        clearInterval(combo_timerId.current);\r\n                        combo_limit.current = 3;\r\n                        setComboStack(0);\r\n                    }\r\n                }, 1000);\r\n                setComboStack(n => {\r\n                    currCombo = n + 1;\r\n                    return n + 1;\r\n                });\r\n            }\r\n            setScore(n => n + fullLayer.length * 10 * currCombo); // 한줄당 10점 (x콤보)\r\n            setBlockCount(n => n + 1); // makeBlock 실행\r\n        }else{\r\n            curr.style.top = Number(curr.style.top.split('px')[0]) + size + \"px\";\r\n        }\r\n    };\r\n    const onKeyDown = (e)=>{\r\n        const curr = document.querySelector('div.active');\r\n        if(!curr) return;\r\n        if(isTouched(false, curr, size, e.key) || collision(false, curr, size, e.key)) return;\r\n\r\n        var {top, left, transform} = curr.style;\r\n        top = Number(top.split('px')[0]);\r\n        left = Number(left.split('px')[0]);\r\n        transform = transform.split('(').length > 1 ? Number(transform.split('(')[1].split('deg')[0]) : 0;\r\n        \r\n        switch(e.key){\r\n            case g_keyset[1]: curr.style.top = (top + size) + \"px\"; break;\r\n            case g_keyset[2]: curr.style.left = (left - size) + \"px\"; break;\r\n            case g_keyset[3]: curr.style.left = (left + size) + \"px\"; break;\r\n            case g_keyset[0]:\r\n                 curr.style.transform = `rotate(${transform + 90}deg)`;\r\n                 const deg = Number(curr.style.transform.split('(')[1].split('deg')[0]);\r\n                 if(collision(true, curr, size)) {\r\n                     curr.style.transform = `rotate(${deg - 90}deg)`;\r\n                }else{\r\n                    isTouched(true, curr, size);\r\n                }\r\n                break;\r\n            case g_keyset[4]:\r\n                var moveDown = top + size;\r\n                while(!isTouched(false, curr, size, g_keyset[1]) && !collision(false, curr, size, g_keyset[1])){\r\n                    curr.style.top = moveDown + \"px\";\r\n                    moveDown += size;\r\n                }\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        // 꼭대기의 중앙부분 찼는지 확인\r\n        if(isUnderCelling(body.current, size)){\r\n            onGameOver({score, level});\r\n            body.current.style.filter = \"blur(6px)\";\r\n            ref_over.current.hidden = false;\r\n            setTimeout(()=> ref_over.current.style.opacity = 1, 50);\r\n        }else{\r\n            if(blockCount !== 0 && blockCount % 30 === 0){\r\n                ref_acc.current += 100;\r\n            }\r\n            let speed = level === \"Easy\" ? 1000 - ref_acc.current\r\n                        : level === \"Normal\" ? 600  - ref_acc.current\r\n                        : level === \"Hard\" ? 300  - ref_acc.current\r\n                        : 150 - ref_acc.current;   \r\n            if(speed < 100) speed = 150;                       \r\n            makeBlock(body, idx, size, ref_fall, moveDownFunc, blockCount, speed);\r\n        }\r\n    }, [blockCount]);\r\n\r\n    useEffect(()=>{\r\n\r\n        document.addEventListener(\"keydown\", onKeyDown);\r\n        return ()=>{ // hide = true 되서 컴포넌트 제거되기 직전에 document 이벤트 해지시킴\r\n            document.removeEventListener(\"keydown\", onKeyDown); \r\n            clearInterval(ref_fall.current);\r\n        };\r\n    },[]);\r\n\r\n    // 가로-10 세로-20 은 고정값\r\n    const bodySize = {\r\n        width: 10 * size + \"px\",\r\n        height: 20 * size + \"px\"\r\n    };\r\n\r\n    return(\r\n        <div>\r\n            <div style={{height : \"40px\"}}>\r\n                <div style={{display : \"flex\"}}>\r\n                    <div className=\"score\">Score : {score}</div>\r\n                    <div style={{margin : \"0 auto\"}}></div>\r\n                    <div className=\"score\">Level : {level}</div>\r\n                </div>\r\n\r\n                {/* <div className=\"combo\" ref={combo_div}>\r\n                        <div className=\"combo-number\">{comboStack}</div> \r\n                        Combo!\r\n                    </div>  */}\r\n\r\n                {comboStack > 0 ? \r\n                    <div className=\"combo\" ref={combo_div}>\r\n                        <div className=\"combo-number\">{comboStack}</div> \r\n                        Combo!\r\n                    </div> \r\n                : null}\r\n            </div>\r\n            <div className=\"game-over\" ref={ref_over} hidden={true}>\r\n                Game Over\r\n            </div>\r\n            <div id=\"body\" className=\"body-frame\" ref={body} style={bodySize}></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MainBody;","import React, { useContext } from 'react';\r\nimport {SessionContext} from '../../App';\r\n\r\nfunction TopMenu({themeColor}){\r\n    const context = useContext(SessionContext);\r\n    const theme = themeColor === \"dark\" ? \"dark-el\" : \"\";\r\n    return (\r\n        <div className={`top-menu-bar ${theme}`}>\r\n            <div className=\"top-menu-text\">Welcome! \"{context.session.id}\"</div>\r\n            <div className=\"pusher\"></div>\r\n            <div className=\"basic-btn-2\" onClick={()=>{context.onLogout()}}>Logout</div>\r\n            <div className=\"basic-btn-2\" onClick={()=>{alert('menu')}}>Menu</div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default TopMenu;","import React, { useEffect, useState } from 'react';\r\nimport { UT } from '../../util/util';\r\n\r\nfunction FootNotice(){\r\n    const [topList, setTopList] = useState([]);\r\n    \r\n    useEffect(()=>{\r\n        const param = {\r\n            url : \"getTopRanker\"\r\n        }\r\n        UT.request(param, (res)=>{\r\n            setTopList(res.result.slice());\r\n        });\r\n    }, []);\r\n    \r\n    return (\r\n        <div className=\"footer\">\r\n            <div className=\"footer-noti-text\" style={{color : \"black\"}}>Notice</div>\r\n            <div className=\"ani-move-left\" style={{whiteSpace: \"nowrap\"}}>\r\n                <span style={{marginRight : \"12px\", color : \"black\"}}>Current Top Rankers</span>  \r\n                {topList.map((top, idx)=>{\r\n                    const style = {\r\n                        marginRight : \"10px\",\r\n                        color : top.level === \"Extreme\" ? \"red\" : top.level === \"Hard\" ? \"#002bff\" : top.level === \"Normal\" ? \"green\" : \"gray\"\r\n                    }\r\n                    return (\r\n                        <span style={style} key={idx}>\r\n                            {` ${top.level} : ${top.name}`}\r\n                        </span>\r\n                    );\r\n                })}\r\n                <span style={{color : \"black\"}}>!</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FootNotice;","import React, { useRef, useState, useContext, useEffect } from 'react';\r\nimport FirstMenu from './FirstMenu';\r\nimport MainBody from './MainBody';\r\nimport TopMenu from './TopMenu';\r\nimport FootNotice from './FootNotice';\r\nimport {UT} from '../../util/util';\r\nimport {SessionContext} from '../../App';\r\n\r\nfunction Tetris(){\r\n    const context = useContext(SessionContext);\r\n    const [hideMenu, setHideMenu] = useState(false);\r\n    const [hideBody, setHideBody] = useState(true);\r\n\r\n    const [bodySize, setBodySize] = useState(30);\r\n    const level = [\"Easy\", \"Normal\", \"Hard\", \"Extreme\"];\r\n    const [currLevel, setCurrLevel] = useState(\"\");\r\n    const [keys, setKeys] = useState([]);\r\n    const ref_cont = useRef();\r\n\r\n    const levelSelected = ({textContent})=>{\r\n        setCurrLevel(textContent);\r\n        const param = {\r\n            url : \"getKeySet\",\r\n            body : {name : context.session.id}\r\n        };\r\n        UT.request(param, (res)=>{\r\n            var data = res.result[0] && res.result[0].keyset;\r\n            const arr = data ? res.result[0].keyset.split('/') : ['w','s','a','d','j'];\r\n            setKeys(arr);\r\n            setHideMenu(true);\r\n            setHideBody(false);\r\n        });\r\n    }\r\n    const onBackToMenu = ()=>{\r\n        setHideMenu(false);\r\n        setHideBody(true);\r\n    }\r\n    const onRefresh = ()=>{\r\n        setHideMenu(true);\r\n        setTimeout(()=>{setHideMenu(false)}, 50);\r\n    }\r\n    const onRestart = ()=>{\r\n        setHideBody(true);\r\n        setTimeout(()=>{setHideBody(false)}, 50);\r\n    }\r\n    const onGameOver = ({score, level})=>{ // game over 되었을때\r\n        setTimeout(()=>{\r\n            UT.confirm(\"Would you like to record your score?\", ()=>{\r\n                const param = {\r\n                    url : \"saveScore\",\r\n                    body : {\r\n                        name : context.session.id,\r\n                        score,\r\n                        level,\r\n                        id : UT.uuid()    \r\n                    }\r\n                };\r\n                UT.request(param, (res)=>{\r\n                    if(res.errMsg){\r\n                        UT.alert(res.errMsg, moveBtns);\r\n                    }else{\r\n                        UT.alert(\"Your score has been Recoded !\", moveBtns);\r\n                    }\r\n                });\r\n            }, ()=>{\r\n                moveBtns();      \r\n            });\r\n        }, 1500);\r\n    }\r\n    const moveBtns = ()=>{\r\n        var btns = ref_cont.current.querySelectorAll('div.mainbody-side-btn');\r\n        for(var i=0; i<btns.length; i++){\r\n            btns[i].classList.add('mainbody-side-btn-move');\r\n            btns[i].style.marginTop = (15 * i) + \"px\";\r\n        }\r\n    }\r\n    \r\n    useEffect(()=>{\r\n        const param = {\r\n            url : \"getTheme\",\r\n            body : {name : context.session.id}\r\n        };\r\n        UT.request(param, (res)=>{\r\n            const rs = res.result[0];\r\n            if(rs){\r\n                context.onChangeTheme(rs.theme);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    return(\r\n        <div className=\"frame\">\r\n            <TopMenu themeColor={context.themeColor}></TopMenu>\r\n            {hideMenu ? null : <FirstMenu onSelect={levelSelected} level={level} onRefresh={onRefresh}></FirstMenu>}\r\n            {hideBody ? null : \r\n                <div ref={ref_cont} style={{margin : \"0 auto\"}}>\r\n                    <MainBody size={bodySize} level={currLevel} onGameOver={onGameOver} keyset={keys}></MainBody>\r\n                    <div className=\"label3 mainbody-side-btn\" onClick={()=>{onRestart(currLevel)}}>Restart</div>\r\n                    <div className=\"label3 mainbody-side-btn\" onClick={()=>{onBackToMenu()}}>To menu</div>\r\n                </div>\r\n            }\r\n            <FootNotice></FootNotice>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Tetris;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { UT } from '../../util/util';\r\n\r\nfunction Join({onJoinEnd}){\r\n    const [id, setId] = useState(\"\");\r\n    const [pw, setPw] = useState(\"\");\r\n    const [pwConf, setPwConf] = useState(\"\");\r\n    const [warnMsg, setWarnMsg] = useState(\"\");\r\n    const ref_box = useRef();\r\n    const ref_warn = useRef();\r\n    \r\n    const onChange = (e)=>{\r\n        const inputs = ref_box.current.querySelectorAll(`input[class=warn-input]`);\r\n        if(inputs.length > 0){\r\n            for(var i=0 ;i<inputs.length; i++){\r\n                inputs[i].classList.remove(\"warn-input\");\r\n            }\r\n            ref_warn.current.style.visibility = \"hidden\";\r\n        }\r\n        const {value, name} = e.target;\r\n        if(name === \"id\"){\r\n            setId(value);\r\n        }else if(name === \"pw\"){\r\n            setPw(value);\r\n        }else{\r\n            setPwConf(value)\r\n        }\r\n    }\r\n    const onClick = (e)=>{\r\n        if(e.target.dataset.name === \"signup\"){\r\n            gosignup();\r\n        }else{\r\n            onJoinEnd();\r\n        }\r\n    }\r\n    const onKeyDown = (e)=>{\r\n        if(e.keyCode === 13) gosignup();\r\n    }\r\n    const gosignup = ()=>{\r\n        const empty = !(id.trim()) ? \"id\" : !(pw.trim()) ? \"pw\" : !(pwConf.trim()) ? \"pw_conf\" : \"\";\r\n        if(empty){\r\n            const input = ref_box.current.querySelector(`input[name=${empty}]`);\r\n            input.classList.add(\"warn-input\");\r\n            \r\n            const field = empty === \"id\" ? \"User Name\" : empty === \"pw\" ? \"Password\" : \"Password Confirm\";\r\n            ref_warn.current.style.visibility = \"visible\";\r\n            setWarnMsg(`${field} is empty.`);\r\n            return;\r\n        }\r\n        if(pw !== pwConf){\r\n            const inputs = ref_box.current.querySelectorAll(`input[name*='pw']`);\r\n            for(var i=0 ;i<inputs.length; i++){\r\n                inputs[i].classList.add(\"warn-input\");\r\n            }\r\n            ref_warn.current.style.visibility = \"visible\";\r\n            setWarnMsg(\"Passwords are not same.\");\r\n            return;\r\n        }\r\n\r\n        UT.confirm(\"Would you like to register?\", ()=>{\r\n            const param = {\r\n                url : \"signup\",\r\n                body : {id, pw}\r\n            };\r\n            UT.request(param, (result)=>{\r\n                if(result.errMsg){\r\n                    const msg = result.errMsg === \"exist\" ? `'${id}' is already exist` : result.errMsg;\r\n                    UT.alert(msg);\r\n                }else{\r\n                    UT.alert(\"You are registed.\", ()=>{\r\n                        onJoinEnd();\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const input = ref_box.current.querySelector('input[name=id]');\r\n        input.focus();\r\n    }, []);\r\n\r\n    const style = {\r\n        top : \"-60px\"\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-box ani-vanish\" ref={ref_box}>\r\n            <div className=\"welcome-title\">TETRIS</div>\r\n            <div className=\"login-text text-theme\">Join to play</div>\r\n            <div className=\"input-login\" style={style}>\r\n                <input name=\"id\" onChange={onChange} onKeyDown={onKeyDown} placeholder=\"User Name\"></input>\r\n            </div>\r\n            <div className=\"input-login\" style={style}>\r\n                <input name=\"pw\" onChange={onChange} onKeyDown={onKeyDown} placeholder=\"Password\" type=\"password\"></input>\r\n            </div>\r\n            <div className=\"input-login\" style={style}>\r\n                <input name=\"pw_conf\" onChange={onChange} onKeyDown={onKeyDown} placeholder=\"Password Confirm\" type=\"password\"></input>\r\n            </div>\r\n            <div className=\"login-button\" data-name=\"signup\" onClick={onClick}  style={style}>Sing up</div>\r\n\r\n            <div className=\"warn-msg\" ref={ref_warn} style={{top : \"-55px\"}}>{warnMsg}</div>\r\n\r\n            <div className=\"signin-text\" style={{top : \"-45px\"}}>\r\n                <span data-name=\"sign\" onClick={onClick}>Back</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Join;","import React, { useEffect, useRef, useState } from 'react';\r\nimport { UT } from '../../util/util';\r\n\r\nfunction Login({onClickSignIn, onLogin}){\r\n    const [id, setId] = useState(\"\");\r\n    const [pw, setPw] = useState(\"\");\r\n    const [warnMsg, setWarnMsg] = useState(\"\");\r\n    const ref_box = useRef();\r\n    const ref_warn = useRef();\r\n\r\n    const onChange = (e)=>{\r\n        const input = ref_box.current.querySelector(`input[class=warn-input]`);\r\n        if(input){\r\n            input.classList.remove(\"warn-input\");\r\n            ref_warn.current.style.visibility = \"hidden\";\r\n        }\r\n        if(e.target.name === \"id\"){\r\n            setId(e.target.value);\r\n        }else{\r\n            setPw(e.target.value);\r\n        }\r\n    }\r\n    const onClick = (e)=>{\r\n        if(e.target.dataset.name === \"login\"){\r\n            goLogin();\r\n        }else{\r\n            onClickSignIn();\r\n        }\r\n    }\r\n    const onKeyDown = (e)=>{\r\n        if(e.keyCode === 13) goLogin();\r\n    }\r\n    const goLogin = ()=>{\r\n        const empty = !(id.trim()) ? \"id\" : !(pw.trim()) ? \"pw\" : \"\";\r\n        if(empty){\r\n            const input = ref_box.current.querySelector(`input[name=${empty}]`);\r\n            input.classList.add(\"warn-input\");\r\n            \r\n            const field = empty === \"id\" ? \"User Name\" : \"Password\";\r\n            ref_warn.current.style.visibility = \"visible\";\r\n            setWarnMsg(`${field} is empty.`);\r\n            return;\r\n        }\r\n        const param = {\r\n            url : \"login\",\r\n            body : {id, pw}\r\n        };\r\n        UT.request(param, ({result, data})=>{\r\n            if(result.length === 0){\r\n                UT.alert(`Check User Name or Password again.`);\r\n            }else{\r\n                onLogin(id);\r\n            }\r\n        });\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const input = ref_box.current.querySelector('input[name=id]');\r\n        input.focus();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"login-box\" ref={ref_box}>\r\n            <div className=\"welcome-title\">TETRIS</div>\r\n            <div className=\"login-text text-theme\">Login to play</div>\r\n            <div className=\"input-login\">\r\n                <input name=\"id\" onChange={onChange} onKeyDown={onKeyDown} placeholder=\"User Name\"></input>\r\n            </div>\r\n            <div className=\"input-login\">\r\n                <input name=\"pw\" onChange={onChange} onKeyDown={onKeyDown} placeholder=\"Password\" type=\"password\"></input>\r\n            </div>\r\n            <div className=\"login-button\" data-name=\"login\" onClick={onClick}>Login</div>\r\n\r\n            <div className=\"warn-msg\" ref={ref_warn}>{warnMsg}</div>\r\n\r\n            <div className=\"signin-text\">\r\n                <span style={{color : \"var(--inactive-color)\", fontSize : \"15px\", marginRight : \"8px\"}}>New here?</span>\r\n                <span data-name=\"sign\" onClick={onClick}>Sing up</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport Join from './Join';\r\nimport Login from \"./Login\";\r\nimport './Welcome.css';\r\n\r\nfunction Welcome({onLoginSuccess}){\r\n    const [isJoin, setIsJoin] = useState(false);\r\n\r\n    const clickSignIn = ()=>{\r\n        setIsJoin(true);\r\n    }\r\n    const joinEnd = ()=>{\r\n        setIsJoin(false);\r\n    }\r\n    const onLogin = (id)=>{\r\n        onLoginSuccess(id);\r\n    }\r\n\r\n    return (\r\n        <div className=\"background-theme\">\r\n            {!isJoin ? <Login onClickSignIn={clickSignIn} onLogin={onLogin}></Login> : null}\r\n            {isJoin ? <Join onJoinEnd={joinEnd}></Join> : null}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Welcome;","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Tetris from './pages/tetris/Tetris';\nimport { UT } from './util/util';\nimport Welcome from './pages/welcome/Welcome';\nexport const SessionContext = React.createContext(null);\n\nfunction App() {\n  const [session, setSession] = useState({\n    id : sessionStorage.getItem(\"user_id\") || null,\n    login : sessionStorage.getItem(\"login\") || false\n  });\n  const [themeColor, setThemeColor] = useState(\"\");\n\n  const onLoginSuccess = (id)=>{\n    sessionStorage.setItem(\"user_id\", id);\n    sessionStorage.setItem(\"login\", true);\n    setSession({\n      id,\n      login : true\n    });\n  }\n\n  const onLogout = ()=>{\n    UT.confirm(\"Do you wnat to logout?\", ()=>{\n      document.querySelector('#root').classList.remove('dark');\n      sessionStorage.clear();\n      setSession({id : null, login : false});\n      setThemeColor(\"\");\n    });\n  }\n\n  const onChangeTheme = (theme)=>{\n    if(theme === \"dark\"){\n      document.querySelector('#root').classList.add(theme);\n      document.styleSheets[2].rules[11].style.backgroundColor = \"var(--theme-black2)\";\n    }else{\n      document.querySelector('#root').classList.remove(\"dark\");\n      document.styleSheets[2].rules[11].style.backgroundColor = \"white\";\n\n    }\n    setThemeColor(theme);\n  }\n\n  useEffect(()=>{\n    UT.request({url : \"getToken\", method : \"GET\"}, (res)=>{\n      document.querySelector('meta[name=_csrf]').content = res.data.token;\n    });\n  }, []);\n\n  return (\n      <div className=\"no-drag\" style={{height:\"100vh\"}}>\n          <SessionContext.Provider value={{session, onLogout, themeColor, onChangeTheme}}>\n              {session.login ? <Tetris></Tetris> : null}\n              {session.login ? null : <Welcome onLoginSuccess={onLoginSuccess}></Welcome>}\n          </SessionContext.Provider>\n      </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}